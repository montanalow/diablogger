<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: ActiveModel::Validations::ClassMethods [Rails Framework Documentation]</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;

    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }

  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }<\/style>" )

  // ]]>
  </script>

</head>
<body>


    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Module</strong></td>
          <td class="class-name-in-header">ActiveModel::Validations::ClassMethods</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>


                <a href="../../../files/Users/montana/_bundle/ruby/1_9_1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/validations/acceptance_rb.html">

                /Users/montana/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/validations/acceptance.rb

                </a>


        <br />


                <a href="../../../files/Users/montana/_bundle/ruby/1_9_1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/validations/confirmation_rb.html">

                /Users/montana/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/validations/confirmation.rb

                </a>


        <br />


                <a href="../../../files/Users/montana/_bundle/ruby/1_9_1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/validations/exclusion_rb.html">

                /Users/montana/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/validations/exclusion.rb

                </a>


        <br />


                <a href="../../../files/Users/montana/_bundle/ruby/1_9_1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/validations/format_rb.html">

                /Users/montana/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/validations/format.rb

                </a>


        <br />


                <a href="../../../files/Users/montana/_bundle/ruby/1_9_1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/validations/inclusion_rb.html">

                /Users/montana/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/validations/inclusion.rb

                </a>


        <br />


                <a href="../../../files/Users/montana/_bundle/ruby/1_9_1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/validations/length_rb.html">

                /Users/montana/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/validations/length.rb

                </a>


        <br />


                <a href="../../../files/Users/montana/_bundle/ruby/1_9_1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/validations/numericality_rb.html">

                /Users/montana/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/validations/numericality.rb

                </a>


        <br />


                <a href="../../../files/Users/montana/_bundle/ruby/1_9_1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/validations/presence_rb.html">

                /Users/montana/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/validations/presence.rb

                </a>


        <br />


                <a href="../../../files/Users/montana/_bundle/ruby/1_9_1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/validations/validates_rb.html">

                /Users/montana/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/validations/validates.rb

                </a>


        <br />


                <a href="../../../files/Users/montana/_bundle/ruby/1_9_1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/validations/with_rb.html">

                /Users/montana/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/validations/with.rb

                </a>


        <br />


                <a href="../../../files/Users/montana/_bundle/ruby/1_9_1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/validations_rb.html">

                /Users/montana/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/validations.rb

                </a>


        <br />

            </td>
        </tr>


        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">

  <div id="contextContent">

   </div>


    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">

        <a href="#M000730">validate</a>&nbsp;&nbsp;

        <a href="#M000727">validates</a>&nbsp;&nbsp;

        <a href="#M000718">validates_acceptance_of</a>&nbsp;&nbsp;

        <a href="#M000719">validates_confirmation_of</a>&nbsp;&nbsp;

        <a href="#M000729">validates_each</a>&nbsp;&nbsp;

        <a href="#M000720">validates_exclusion_of</a>&nbsp;&nbsp;

        <a href="#M000721">validates_format_of</a>&nbsp;&nbsp;

        <a href="#M000722">validates_inclusion_of</a>&nbsp;&nbsp;

        <a href="#M000723">validates_length_of</a>&nbsp;&nbsp;

        <a href="#M000725">validates_numericality_of</a>&nbsp;&nbsp;

        <a href="#M000726">validates_presence_of</a>&nbsp;&nbsp;

        <a href="#M000724">validates_size_of</a>&nbsp;&nbsp;

        <a href="#M000728">validates_with</a>&nbsp;&nbsp;

        <a href="#M000731">validators</a>&nbsp;&nbsp;

        <a href="#M000732">validators_on</a>&nbsp;&nbsp;

      </div>
    </div>

  </div>

    <!-- if includes -->

    <div id="section">




    <!-- if method_list -->

    <div id="methods">

      <h3 class="section-bar">Public Instance methods</h3>


      <div id="method-M000730" class="method-detail">
        <a name="M000730"></a>

        <div class="method-heading">

          <a href="#M000730" class="method-signature">

          <span class="method-name">validate</span><span class="method-args">(*args, &amp;block)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Adds a validation method or block to the class. This is useful when
overriding the <tt>validate</tt> instance method becomes too unwieldly and
you&#8217;re looking for more descriptive declaration of your validations.
</p>
<p>
This can be done with a symbol pointing to a method:
</p>
<pre>
  class Comment
    include ActiveModel::Validations

    validate :must_be_friends

    def must_be_friends
      errors.add_to_base(&quot;Must be friends to leave a comment&quot;) unless commenter.friend_of?(commentee)
    end
  end
</pre>
<p>
Or with a block which is passed the current record to be validated:
</p>
<pre>
  class Comment
    include ActiveModel::Validations

    validate do |comment|
      comment.must_be_friends
    end

    def must_be_friends
      errors.add_to_base(&quot;Must be friends to leave a comment&quot;) unless commenter.friend_of?(commentee)
    end
  end
</pre>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000730-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000730-source">
<pre>
     <span class="ruby-comment cmt"># File /Users/montana/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/validations.rb, line 116</span>
116:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">validate</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
117:         <span class="ruby-identifier">options</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">last</span>
118:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-identifier">:on</span>)
119:           <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:if</span>] = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">wrap</span>(<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:if</span>])
120:           <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:if</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;@_on_validate == :#{options[:on]}&quot;</span>
121:         <span class="ruby-keyword kw">end</span>
122:         <span class="ruby-identifier">set_callback</span>(<span class="ruby-identifier">:validate</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
123:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000727" class="method-detail">
        <a name="M000727"></a>

        <div class="method-heading">

          <a href="#M000727" class="method-signature">

          <span class="method-name">validates</span><span class="method-args">(*attributes)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
This method is a shortcut to all default validators and any custom
validator classes ending in &#8216;Validator&#8217;. Note that <a
href="../../Rails.html">Rails</a> default validators can be overridden
inside specific classes by creating custom validator classes in their place
such as <a href="PresenceValidator.html">PresenceValidator</a>.
</p>
<p>
Examples of using the default rails validators:
</p>
<pre>
  validates :terms, :acceptance =&gt; true
  validates :password, :confirmation =&gt; true
  validates :username, :exclusion =&gt; { :in =&gt; %w(admin superuser) }
  validates :email, :format =&gt; { :with =&gt; /\A([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})\Z/i, :on =&gt; :create }
  validates :age, :inclusion =&gt; { :in =&gt; 0..9 }
  validates :first_name, :length =&gt; { :maximum =&gt; 30 }
  validates :age, :numericality =&gt; true
  validates :username, :presence =&gt; true
  validates :username, :uniqueness =&gt; true
</pre>
<p>
The power of the <tt>validates</tt> method comes when using cusom
validators and default validators in one call for a given attribute e.g.
</p>
<pre>
  class EmailValidator &lt; ActiveModel::EachValidator
    def validate_each(record, attribute, value)
      record.errors[attribute] &lt;&lt; (options[:message] || &quot;is not an email&quot;) unless
        value =~ /^([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})$/i
    end
  end

  class Person
    include ActiveModel::Validations
    attr_accessor :name, :email

    validates :name, :presence =&gt; true, :uniqueness =&gt; true, :length =&gt; { :maximum =&gt; 100 }
    validates :email, :presence =&gt; true, :email =&gt; true
  end
</pre>
<p>
<a href="../Validator.html">Validator</a> classes my also exist within the
class being validated allowing custom modules of validators to be included
as needed e.g.
</p>
<pre>
  class Film
    include ActiveModel::Validations

    class TitleValidator &lt; ActiveModel::EachValidator
      def validate_each(record, attribute, value)
        record.errors[attribute] &lt;&lt; &quot;must start with 'the'&quot; unless =~ /^the/i
      end
    end

    validates :name, :title =&gt; true
  end
</pre>
<p>
The validators hash can also handle regular expressions, ranges and arrays:
</p>
<pre>
  validates :email, :format =&gt; /@/
  validates :gender, :inclusion =&gt; %w(male female)
  validates :password, :length =&gt; 6..20
</pre>
<p>
Finally, the options :if, :unless, :on, :allow_blank and :allow_nil can be
given to one specific validator:
</p>
<pre>
  validates :password, :presence =&gt; { :if =&gt; :password_required? }, :confirmation =&gt; true
</pre>
<p>
Or to all at the same time:
</p>
<pre>
  validates :password, :presence =&gt; true, :confirmation =&gt; true, :if =&gt; :password_required?
</pre>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000727-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000727-source">
<pre>
    <span class="ruby-comment cmt"># File /Users/montana/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/validations/validates.rb, line 71</span>
71:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">validates</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">attributes</span>)
72:         <span class="ruby-identifier">defaults</span> = <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">extract_options!</span>
73:         <span class="ruby-identifier">validations</span> = <span class="ruby-identifier">defaults</span>.<span class="ruby-identifier">slice!</span>(<span class="ruby-identifier">:if</span>, <span class="ruby-identifier">:unless</span>, <span class="ruby-identifier">:on</span>, <span class="ruby-identifier">:allow_blank</span>, <span class="ruby-identifier">:allow_nil</span>)
74: 
75:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;You need to supply at least one attribute&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">empty?</span>
76:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;Attribute names must be symbols&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">any?</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">attribute</span><span class="ruby-operator">|</span> <span class="ruby-operator">!</span><span class="ruby-identifier">attribute</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Symbol</span>) }
77:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;You need to supply at least one validation&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">validations</span>.<span class="ruby-identifier">empty?</span>
78: 
79:         <span class="ruby-identifier">defaults</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">:attributes</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">attributes</span>)
80: 
81:         <span class="ruby-identifier">validations</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">options</span><span class="ruby-operator">|</span>
82:           <span class="ruby-keyword kw">begin</span>
83:             <span class="ruby-identifier">validator</span> = <span class="ruby-identifier">const_get</span>(<span class="ruby-node">&quot;#{key.to_s.camelize}Validator&quot;</span>)
84:           <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">NameError</span>
85:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;Unknown validator: '#{key}'&quot;</span>
86:           <span class="ruby-keyword kw">end</span>
87: 
88:           <span class="ruby-identifier">validates_with</span>(<span class="ruby-identifier">validator</span>, <span class="ruby-identifier">defaults</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">_parse_validates_options</span>(<span class="ruby-identifier">options</span>)))
89:         <span class="ruby-keyword kw">end</span>
90:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000718" class="method-detail">
        <a name="M000718"></a>

        <div class="method-heading">

          <a href="#M000718" class="method-signature">

          <span class="method-name">validates_acceptance_of</span><span class="method-args">(*attr_names)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Encapsulates the pattern of wanting to validate the acceptance of a terms
of service check box (or similar agreement). Example:
</p>
<pre>
  class Person &lt; ActiveRecord::Base
    validates_acceptance_of :terms_of_service
    validates_acceptance_of :eula, :message =&gt; &quot;must be abided&quot;
  end
</pre>
<p>
If the database column does not exist, the <tt>terms_of_service</tt>
attribute is entirely virtual. This check is performed only if
<tt>terms_of_service</tt> is not <tt>nil</tt> and by default on save.
</p>
<p>
Configuration options:
</p>
<ul>
<li><tt>:message</tt> - A custom error message (default is: &#8220;must be
accepted&#8221;).

</li>
<li><tt>:on</tt> - Specifies when this validation is active (default is
<tt>:save</tt>, other options <tt>:create</tt>, <tt>:update</tt>).

</li>
<li><tt>:allow_nil</tt> - Skip validation if attribute is <tt>nil</tt> (default
is true).

</li>
<li><tt>:accept</tt> - Specifies value that is considered accepted. The default
value is a string &#8220;1&#8221;, which makes it easy to relate to an HTML
checkbox. This should be set to <tt>true</tt> if you are validating a
database column, since the attribute is typecast from &#8220;1&#8221; to
<tt>true</tt> before validation.

</li>
<li><tt>:if</tt> - Specifies a method, proc or string to call to determine if
the validation should occur (e.g. <tt>:if =&gt; :allow_validation</tt>, or
<tt>:if =&gt; Proc.new { |user| user.signup_step &gt; 2 }</tt>). The
method, proc or string should return or evaluate to a true or false value.

</li>
<li><tt>:unless</tt> - Specifies a method, proc or string to call to determine
if the validation should not occur (e.g. <tt>:unless =&gt;
:skip_validation</tt>, or <tt>:unless =&gt; Proc.new { |user|
user.signup_step &lt;= 2 }</tt>). The method, proc or string should return
or evaluate to a true or false value.

</li>
</ul>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000718-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000718-source">
<pre>
    <span class="ruby-comment cmt"># File /Users/montana/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/validations/acceptance.rb, line 46</span>
46:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">validates_acceptance_of</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">attr_names</span>)
47:         <span class="ruby-identifier">validates_with</span> <span class="ruby-constant">AcceptanceValidator</span>, <span class="ruby-identifier">_merge_attributes</span>(<span class="ruby-identifier">attr_names</span>)
48:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000719" class="method-detail">
        <a name="M000719"></a>

        <div class="method-heading">

          <a href="#M000719" class="method-signature">

          <span class="method-name">validates_confirmation_of</span><span class="method-args">(*attr_names)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Encapsulates the pattern of wanting to validate a password or email address
field with a confirmation. Example:
</p>
<pre>
  Model:
    class Person &lt; ActiveRecord::Base
      validates_confirmation_of :user_name, :password
      validates_confirmation_of :email_address, :message =&gt; &quot;should match confirmation&quot;
    end

  View:
    &lt;%= password_field &quot;person&quot;, &quot;password&quot; %&gt;
    &lt;%= password_field &quot;person&quot;, &quot;password_confirmation&quot; %&gt;
</pre>
<p>
The added <tt>password_confirmation</tt> attribute is virtual; it exists
only as an in-memory attribute for validating the password. To achieve
this, the validation adds accessors to the model for the confirmation
attribute. NOTE: This check is performed only if
<tt>password_confirmation</tt> is not <tt>nil</tt>, and by default only on
save. To require confirmation, make sure to add a presence check for the
confirmation attribute:
</p>
<pre>
  validates_presence_of :password_confirmation, :if =&gt; :password_changed?
</pre>
<p>
Configuration options:
</p>
<ul>
<li><tt>:message</tt> - A custom error message (default is:
&#8220;doesn&#8217;t match confirmation&#8221;).

</li>
<li><tt>:on</tt> - Specifies when this validation is active (default is
<tt>:save</tt>, other options <tt>:create</tt>, <tt>:update</tt>).

</li>
<li><tt>:if</tt> - Specifies a method, proc or string to call to determine if
the validation should occur (e.g. <tt>:if =&gt; :allow_validation</tt>, or
<tt>:if =&gt; Proc.new { |user| user.signup_step &gt; 2 }</tt>). The
method, proc or string should return or evaluate to a true or false value.

</li>
<li><tt>:unless</tt> - Specifies a method, proc or string to call to determine
if the validation should not occur (e.g. <tt>:unless =&gt;
:skip_validation</tt>, or <tt>:unless =&gt; Proc.new { |user|
user.signup_step &lt;= 2 }</tt>). The method, proc or string should return
or evaluate to a true or false value.

</li>
</ul>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000719-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000719-source">
<pre>
    <span class="ruby-comment cmt"># File /Users/montana/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/validations/confirmation.rb, line 44</span>
44:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">validates_confirmation_of</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">attr_names</span>)
45:         <span class="ruby-identifier">validates_with</span> <span class="ruby-constant">ConfirmationValidator</span>, <span class="ruby-identifier">_merge_attributes</span>(<span class="ruby-identifier">attr_names</span>)
46:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000729" class="method-detail">
        <a name="M000729"></a>

        <div class="method-heading">

          <a href="#M000729" class="method-signature">

          <span class="method-name">validates_each</span><span class="method-args">(*attr_names, &amp;block)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Validates each attribute against a block.
</p>
<pre>
  class Person
    include ActiveModel::Validations

    attr_accessor :first_name, :last_name

    validates_each :first_name, :last_name do |record, attr, value|
      record.errors.add attr, 'starts with z.' if value.to_s[0] == ?z
    end
  end
</pre>
<p>
Options:
</p>
<ul>
<li><tt>:on</tt> - Specifies when this validation is active (default is
<tt>:save</tt>, other options <tt>:create</tt>, <tt>:update</tt>).

</li>
<li><tt>:allow_nil</tt> - Skip validation if attribute is <tt>nil</tt>.

</li>
<li><tt>:allow_blank</tt> - Skip validation if attribute is blank.

</li>
<li><tt>:if</tt> - Specifies a method, proc or string to call to determine if
the validation should occur (e.g. <tt>:if =&gt; :allow_validation</tt>, or
<tt>:if =&gt; Proc.new { |user| user.signup_step &gt; 2 }</tt>). The
method, proc or string should return or evaluate to a true or false value.

</li>
<li><tt>:unless</tt> - Specifies a method, proc or string to call to determine
if the validation should not occur (e.g. <tt>:unless =&gt;
:skip_validation</tt>, or <tt>:unless =&gt; Proc.new { |user|
user.signup_step &lt;= 2 }</tt>). The method, proc or string should return
or evaluate to a true or false value.

</li>
</ul>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000729-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000729-source">
<pre>
    <span class="ruby-comment cmt"># File /Users/montana/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/validations.rb, line 81</span>
81:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">validates_each</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">attr_names</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
82:         <span class="ruby-identifier">options</span> = <span class="ruby-identifier">attr_names</span>.<span class="ruby-identifier">extract_options!</span>.<span class="ruby-identifier">symbolize_keys</span>
83:         <span class="ruby-identifier">validates_with</span> <span class="ruby-constant">BlockValidator</span>, <span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:attributes</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">attr_names</span>.<span class="ruby-identifier">flatten</span>), <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>
84:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000720" class="method-detail">
        <a name="M000720"></a>

        <div class="method-heading">

          <a href="#M000720" class="method-signature">

          <span class="method-name">validates_exclusion_of</span><span class="method-args">(*attr_names)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Validates that the value of the specified attribute is not in a particular
enumerable object.
</p>
<pre>
  class Person &lt; ActiveRecord::Base
    validates_exclusion_of :username, :in =&gt; %w( admin superuser ), :message =&gt; &quot;You don't belong here&quot;
    validates_exclusion_of :age, :in =&gt; 30..60, :message =&gt; &quot;This site is only for under 30 and over 60&quot;
    validates_exclusion_of :format, :in =&gt; %w( mov avi ), :message =&gt; &quot;extension {{value}} is not allowed&quot;
  end
</pre>
<p>
Configuration options:
</p>
<ul>
<li><tt>:in</tt> - An enumerable object of items that the value shouldn&#8217;t
be part of.

</li>
<li><tt>:message</tt> - Specifies a custom error message (default is: &#8220;is
reserved&#8221;).

</li>
<li><tt>:allow_nil</tt> - If set to true, skips this validation if the
attribute is <tt>nil</tt> (default is <tt>false</tt>).

</li>
<li><tt>:allow_blank</tt> - If set to true, skips this validation if the
attribute is blank (default is <tt>false</tt>).

</li>
<li><tt>:if</tt> - Specifies a method, proc or string to call to determine if
the validation should occur (e.g. <tt>:if =&gt; :allow_validation</tt>, or
<tt>:if =&gt; Proc.new { |user| user.signup_step &gt; 2 }</tt>). The
method, proc or string should return or evaluate to a true or false value.

</li>
<li><tt>:unless</tt> - Specifies a method, proc or string to call to determine
if the validation should not occur (e.g. <tt>:unless =&gt;
:skip_validation</tt>, or <tt>:unless =&gt; Proc.new { |user|
user.signup_step &lt;= 2 }</tt>). The method, proc or string should return
or evaluate to a true or false value.

</li>
</ul>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000720-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000720-source">
<pre>
    <span class="ruby-comment cmt"># File /Users/montana/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/validations/exclusion.rb, line 35</span>
35:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">validates_exclusion_of</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">attr_names</span>)
36:         <span class="ruby-identifier">validates_with</span> <span class="ruby-constant">ExclusionValidator</span>, <span class="ruby-identifier">_merge_attributes</span>(<span class="ruby-identifier">attr_names</span>)
37:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000721" class="method-detail">
        <a name="M000721"></a>

        <div class="method-heading">

          <a href="#M000721" class="method-signature">

          <span class="method-name">validates_format_of</span><span class="method-args">(*attr_names)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Validates whether the value of the specified attribute is of the correct
form, going by the regular expression provided. You can require that the
attribute matches the regular expression:
</p>
<pre>
  class Person &lt; ActiveRecord::Base
    validates_format_of :email, :with =&gt; /\A([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})\Z/i, :on =&gt; :create
  end
</pre>
<p>
Alternatively, you can require that the specified attribute does
<em>not</em> match the regular expression:
</p>
<pre>
  class Person &lt; ActiveRecord::Base
    validates_format_of :email, :without =&gt; /NOSPAM/
  end
</pre>
<p>
Note: use <tt>A</tt> and <tt>Z</tt> to match the start and end of the
string, <tt>^</tt> and <tt>$</tt> match the start/end of a line.
</p>
<p>
You must pass either <tt>:with</tt> or <tt>:without</tt> as an option. In
addition, both must be a regular expression, or else an exception will be
raised.
</p>
<p>
Configuration options:
</p>
<ul>
<li><tt>:message</tt> - A custom error message (default is: &#8220;is
invalid&#8221;).

</li>
<li><tt>:allow_nil</tt> - If set to true, skips this validation if the
attribute is <tt>nil</tt> (default is <tt>false</tt>).

</li>
<li><tt>:allow_blank</tt> - If set to true, skips this validation if the
attribute is blank (default is <tt>false</tt>).

</li>
<li><tt>:with</tt> - Regular expression that if the attribute matches will
result in a successful validation.

</li>
<li><tt>:without</tt> - Regular expression that if the attribute does not match
will result in a successful validation.

</li>
<li><tt>:on</tt> - Specifies when this validation is active (default is
<tt>:save</tt>, other options <tt>:create</tt>, <tt>:update</tt>).

</li>
<li><tt>:if</tt> - Specifies a method, proc or string to call to determine if
the validation should occur (e.g. <tt>:if =&gt; :allow_validation</tt>, or
<tt>:if =&gt; Proc.new { |user| user.signup_step &gt; 2 }</tt>). The
method, proc or string should return or evaluate to a true or false value.

</li>
<li><tt>:unless</tt> - Specifies a method, proc or string to call to determine
if the validation should not occur (e.g. <tt>:unless =&gt;
:skip_validation</tt>, or <tt>:unless =&gt; Proc.new { |user|
user.signup_step &lt;= 2 }</tt>). The method, proc or string should return
or evaluate to a true or false value.

</li>
</ul>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000721-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000721-source">
<pre>
    <span class="ruby-comment cmt"># File /Users/montana/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/validations/format.rb, line 59</span>
59:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">validates_format_of</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">attr_names</span>)
60:         <span class="ruby-identifier">validates_with</span> <span class="ruby-constant">FormatValidator</span>, <span class="ruby-identifier">_merge_attributes</span>(<span class="ruby-identifier">attr_names</span>)
61:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000722" class="method-detail">
        <a name="M000722"></a>

        <div class="method-heading">

          <a href="#M000722" class="method-signature">

          <span class="method-name">validates_inclusion_of</span><span class="method-args">(*attr_names)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Validates whether the value of the specified attribute is available in a
particular enumerable object.
</p>
<pre>
  class Person &lt; ActiveRecord::Base
    validates_inclusion_of :gender, :in =&gt; %w( m f )
    validates_inclusion_of :age, :in =&gt; 0..99
    validates_inclusion_of :format, :in =&gt; %w( jpg gif png ), :message =&gt; &quot;extension {{value}} is not included in the list&quot;
  end
</pre>
<p>
Configuration options:
</p>
<ul>
<li><tt>:in</tt> - An enumerable object of available items.

</li>
<li><tt>:message</tt> - Specifies a custom error message (default is: &#8220;is
not included in the list&#8221;).

</li>
<li><tt>:allow_nil</tt> - If set to true, skips this validation if the
attribute is <tt>nil</tt> (default is <tt>false</tt>).

</li>
<li><tt>:allow_blank</tt> - If set to true, skips this validation if the
attribute is blank (default is <tt>false</tt>).

</li>
<li><tt>:if</tt> - Specifies a method, proc or string to call to determine if
the validation should occur (e.g. <tt>:if =&gt; :allow_validation</tt>, or
<tt>:if =&gt; Proc.new { |user| user.signup_step &gt; 2 }</tt>). The
method, proc or string should return or evaluate to a true or false value.

</li>
<li><tt>:unless</tt> - Specifies a method, proc or string to call to determine
if the validation should not occur (e.g. <tt>:unless =&gt;
:skip_validation</tt>, or <tt>:unless =&gt; Proc.new { |user|
user.signup_step &lt;= 2 }</tt>). The method, proc or string should return
or evaluate to a true or false value.

</li>
</ul>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000722-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000722-source">
<pre>
    <span class="ruby-comment cmt"># File /Users/montana/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/validations/inclusion.rb, line 35</span>
35:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">validates_inclusion_of</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">attr_names</span>)
36:         <span class="ruby-identifier">validates_with</span> <span class="ruby-constant">InclusionValidator</span>, <span class="ruby-identifier">_merge_attributes</span>(<span class="ruby-identifier">attr_names</span>)
37:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000723" class="method-detail">
        <a name="M000723"></a>

        <div class="method-heading">

          <a href="#M000723" class="method-signature">

          <span class="method-name">validates_length_of</span><span class="method-args">(*attr_names)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Validates that the specified attribute matches the length restrictions
supplied. Only one option can be used at a time:
</p>
<pre>
  class Person &lt; ActiveRecord::Base
    validates_length_of :first_name, :maximum=&gt;30
    validates_length_of :last_name, :maximum=&gt;30, :message=&gt;&quot;less than 30 if you don't mind&quot;
    validates_length_of :fax, :in =&gt; 7..32, :allow_nil =&gt; true
    validates_length_of :phone, :in =&gt; 7..32, :allow_blank =&gt; true
    validates_length_of :user_name, :within =&gt; 6..20, :too_long =&gt; &quot;pick a shorter name&quot;, :too_short =&gt; &quot;pick a longer name&quot;
    validates_length_of :zip_code, :minimum =&gt; 5, :too_short =&gt; &quot;please enter at least 5 characters&quot;
    validates_length_of :smurf_leader, :is =&gt; 4, :message =&gt; &quot;papa is spelled with 4 characters... don't play me.&quot;
    validates_length_of :essay, :minimum =&gt; 100, :too_short =&gt; &quot;Your essay must be at least 100 words.&quot;), :tokenizer =&gt; lambda {|str| str.scan(/\w+/) }
  end
</pre>
<p>
Configuration options:
</p>
<ul>
<li><tt>:minimum</tt> - The minimum size of the attribute.

</li>
<li><tt>:maximum</tt> - The maximum size of the attribute.

</li>
<li><tt>:is</tt> - The exact size of the attribute.

</li>
<li><tt>:within</tt> - A range specifying the minimum and maximum size of the
attribute.

</li>
<li><tt>:in</tt> - A synonym(or alias) for <tt>:within</tt>.

</li>
<li><tt>:allow_nil</tt> - Attribute may be <tt>nil</tt>; skip validation.

</li>
<li><tt>:allow_blank</tt> - Attribute may be blank; skip validation.

</li>
<li><tt>:too_long</tt> - The error message if the attribute goes over the
maximum (default is: &#8220;is too long (maximum is {{count}}
characters)&#8221;).

</li>
<li><tt>:too_short</tt> - The error message if the attribute goes under the
minimum (default is: &#8220;is too short (min is {{count}}
characters)&#8221;).

</li>
<li><tt>:wrong_length</tt> - The error message if using the <tt>:is</tt> method
and the attribute is the wrong size (default is: &#8220;is the wrong length
(should be {{count}} characters)&#8221;).

</li>
<li><tt>:message</tt> - The error message to use for a <tt>:minimum</tt>,
<tt>:maximum</tt>, or <tt>:is</tt> violation. An alias of the appropriate
<tt>too_long</tt>/<tt>too_short</tt>/<tt>wrong_length</tt> message.

</li>
<li><tt>:on</tt> - Specifies when this validation is active (default is
<tt>:save</tt>, other options <tt>:create</tt>, <tt>:update</tt>).

</li>
<li><tt>:if</tt> - Specifies a method, proc or string to call to determine if
the validation should occur (e.g. <tt>:if =&gt; :allow_validation</tt>, or
<tt>:if =&gt; Proc.new { |user| user.signup_step &gt; 2 }</tt>). The
method, proc or string should return or evaluate to a true or false value.

</li>
<li><tt>:unless</tt> - Specifies a method, proc or string to call to determine
if the validation should not occur (e.g. <tt>:unless =&gt;
:skip_validation</tt>, or <tt>:unless =&gt; Proc.new { |user|
user.signup_step &lt;= 2 }</tt>). The method, proc or string should return
or evaluate to a true or false value.

</li>
<li><tt>:tokenizer</tt> - Specifies how to split up the attribute string. (e.g.
<tt>:tokenizer =&gt; lambda {|str| str.scan(/w+/)}</tt> to count words as
in above example.) Defaults to <tt>lambda{ |value| value.split(//) }</tt>
which counts individual characters.

</li>
</ul>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000723-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000723-source">
<pre>
    <span class="ruby-comment cmt"># File /Users/montana/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/validations/length.rb, line 91</span>
91:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">validates_length_of</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">attr_names</span>)
92:         <span class="ruby-identifier">validates_with</span> <span class="ruby-constant">LengthValidator</span>, <span class="ruby-identifier">_merge_attributes</span>(<span class="ruby-identifier">attr_names</span>)
93:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000725" class="method-detail">
        <a name="M000725"></a>

        <div class="method-heading">

          <a href="#M000725" class="method-signature">

          <span class="method-name">validates_numericality_of</span><span class="method-args">(*attr_names)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Validates whether the value of the specified attribute is numeric by trying
to convert it to a float with <a href="../../Float.html">Kernel.Float</a>
(if <tt>only_integer</tt> is false) or applying it to the regular
expression <tt>/A[+-]?d+Z/</tt> (if <tt>only_integer</tt> is set to true).
</p>
<pre>
  class Person &lt; ActiveRecord::Base
    validates_numericality_of :value, :on =&gt; :create
  end
</pre>
<p>
Configuration options:
</p>
<ul>
<li><tt>:message</tt> - A custom error message (default is: &#8220;is not a
number&#8221;).

</li>
<li><tt>:on</tt> - Specifies when this validation is active (default is
<tt>:save</tt>, other options <tt>:create</tt>, <tt>:update</tt>).

</li>
<li><tt>:only_integer</tt> - Specifies whether the value has to be an integer,
e.g. an integral value (default is <tt>false</tt>).

</li>
<li><tt>:allow_nil</tt> - Skip validation if attribute is <tt>nil</tt> (default
is <tt>false</tt>). Notice that for fixnum and float columns empty strings
are converted to <tt>nil</tt>.

</li>
<li><tt>:greater_than</tt> - Specifies the value must be greater than the
supplied value.

</li>
<li><tt>:greater_than_or_equal_to</tt> - Specifies the value must be greater
than or equal the supplied value.

</li>
<li><tt>:equal_to</tt> - Specifies the value must be equal to the supplied
value.

</li>
<li><tt>:less_than</tt> - Specifies the value must be less than the supplied
value.

</li>
<li><tt>:less_than_or_equal_to</tt> - Specifies the value must be less than or
equal the supplied value.

</li>
<li><tt>:odd</tt> - Specifies the value must be an odd number.

</li>
<li><tt>:even</tt> - Specifies the value must be an even number.

</li>
<li><tt>:if</tt> - Specifies a method, proc or string to call to determine if
the validation should occur (e.g. <tt>:if =&gt; :allow_validation</tt>, or
<tt>:if =&gt; Proc.new { |user| user.signup_step &gt; 2 }</tt>). The
method, proc or string should return or evaluate to a true or false value.

</li>
<li><tt>:unless</tt> - Specifies a method, proc or string to call to determine
if the validation should not occur (e.g. <tt>:unless =&gt;
:skip_validation</tt>, or <tt>:unless =&gt; Proc.new { |user|
user.signup_step &lt;= 2 }</tt>). The method, proc or string should return
or evaluate to a true or false value.

</li>
</ul>
<p>
The following checks can also be supplied with a proc or a symbol which
corresponds to a method:
</p>
<ul>
<li><tt>:greater_than</tt>

</li>
<li><tt>:greater_than_or_equal_to</tt>

</li>
<li><tt>:equal_to</tt>

</li>
<li><tt>:less_than</tt>

</li>
<li><tt>:less_than_or_equal_to</tt>

<p>
class Person < ActiveRecord::Base
</p>
<pre>
  validates_numericality_of :width, :less_than =&gt; Proc.new { |person| person.height }
  validates_numericality_of :width, :greater_than =&gt; :minimum_weight
</pre>
<p>
end
</p>
</li>
</ul>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000725-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000725-source">
<pre>
     <span class="ruby-comment cmt"># File /Users/montana/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/validations/numericality.rb, line 106</span>
106:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">validates_numericality_of</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">attr_names</span>)
107:         <span class="ruby-identifier">validates_with</span> <span class="ruby-constant">NumericalityValidator</span>, <span class="ruby-identifier">_merge_attributes</span>(<span class="ruby-identifier">attr_names</span>)
108:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000726" class="method-detail">
        <a name="M000726"></a>

        <div class="method-heading">

          <a href="#M000726" class="method-signature">

          <span class="method-name">validates_presence_of</span><span class="method-args">(*attr_names)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Validates that the specified attributes are not blank (as defined by <a
href="../../Object.html#M000054">Object#blank?</a>). Happens by default on
save. Example:
</p>
<pre>
  class Person &lt; ActiveRecord::Base
    validates_presence_of :first_name
  end
</pre>
<p>
The first_name attribute must be in the object and it cannot be blank.
</p>
<p>
If you want to validate the presence of a boolean field (where the real
values are true and false), you will want to use <tt><a
href="ClassMethods.html#M000722">validates_inclusion_of</a> :field_name,
:in =&gt; [true, false]</tt>.
</p>
<p>
This is due to the way <a
href="../../Object.html#M000054">Object#blank?</a> handles boolean values:
<tt>false.blank? # =&gt; true</tt>.
</p>
<p>
Configuration options:
</p>
<ul>
<li><tt>message</tt> - A custom error message (default is: &#8220;can&#8217;t
be blank&#8221;).

</li>
<li><tt>on</tt> - Specifies when this validation is active (default is
<tt>:save</tt>, other options <tt>:create</tt>, <tt>:update</tt>).

</li>
<li><tt>if</tt> - Specifies a method, proc or string to call to determine if
the validation should occur (e.g. <tt>:if =&gt; :allow_validation</tt>, or
<tt>:if =&gt; Proc.new { |user| user.signup_step &gt; 2 }</tt>). The
method, proc or string should return or evaluate to a true or false value.

</li>
<li><tt>unless</tt> - Specifies a method, proc or string to call to determine
if the validation should not occur (e.g. <tt>:unless =&gt;
:skip_validation</tt>, or <tt>:unless =&gt; Proc.new { |user|
user.signup_step &lt;= 2 }</tt>). The method, proc or string should return
or evaluate to a true or false value.

</li>
</ul>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000726-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000726-source">
<pre>
    <span class="ruby-comment cmt"># File /Users/montana/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/validations/presence.rb, line 36</span>
36:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">validates_presence_of</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">attr_names</span>)
37:         <span class="ruby-identifier">validates_with</span> <span class="ruby-constant">PresenceValidator</span>, <span class="ruby-identifier">_merge_attributes</span>(<span class="ruby-identifier">attr_names</span>)
38:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000724" class="method-detail">
        <a name="M000724"></a>

        <div class="method-heading">

          <span class="method-name">validates_size_of</span><span class="method-args">(*attr_names)</span>

        </div>

        <div class="method-description">

          <p>
Alias for <a href="ClassMethods.html#M000723">validates_length_of</a>
</p>

        </div>
      </div>


      <div id="method-M000728" class="method-detail">
        <a name="M000728"></a>

        <div class="method-heading">

          <a href="#M000728" class="method-signature">

          <span class="method-name">validates_with</span><span class="method-args">(*args, &amp;block)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Passes the record off to the class or classes specified and allows them to
add errors based on more complex conditions.
</p>
<pre>
  class Person
    include ActiveModel::Validations
    validates_with MyValidator
  end

  class MyValidator &lt; ActiveModel::Validator
    def validate(record)
      if some_complex_logic
        record.errors[:base] &lt;&lt; &quot;This record is invalid&quot;
      end
    end

    private
      def some_complex_logic
        # ...
      end
  end
</pre>
<p>
You may also pass it multiple classes, like so:
</p>
<pre>
  class Person
    include ActiveModel::Validations
    validates_with MyValidator, MyOtherValidator, :on =&gt; :create
  end
</pre>
<p>
Configuration options:
</p>
<ul>
<li><tt>on</tt> - Specifies when this validation is active (<tt>:create</tt> or
<tt>:update</tt>

</li>
<li><tt>if</tt> - Specifies a method, proc or string to call to determine if
the validation should occur (e.g. <tt>:if =&gt; :allow_validation</tt>, or
<tt>:if =&gt; Proc.new { |user| user.signup_step &gt; 2 }</tt>). The
method, proc or string should return or evaluate to a true or false value.

</li>
<li><tt>unless</tt> - Specifies a method, proc or string to call to determine
if the validation should not occur (e.g. <tt>:unless =&gt;
:skip_validation</tt>, or <tt>:unless =&gt; Proc.new { |user|
user.signup_step &lt;= 2 }</tt>). The method, proc or string should return
or evaluate to a true or false value.

</li>
</ul>
<p>
If you pass any additional configuration options, they will be passed to
the class and available as <tt>options</tt>:
</p>
<pre>
  class Person
    include ActiveModel::Validations
    validates_with MyValidator, :my_custom_key =&gt; &quot;my custom value&quot;
  end

  class MyValidator &lt; ActiveModel::Validator
    def validate(record)
      options[:my_custom_key] # =&gt; &quot;my custom value&quot;
    end
  end
</pre>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000728-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000728-source">
<pre>
    <span class="ruby-comment cmt"># File /Users/montana/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/validations/with.rb, line 60</span>
60:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">validates_with</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
61:         <span class="ruby-identifier">options</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">extract_options!</span>
62:         <span class="ruby-identifier">args</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">klass</span><span class="ruby-operator">|</span>
63:           <span class="ruby-identifier">validator</span> = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">options</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
64:           <span class="ruby-identifier">validator</span>.<span class="ruby-identifier">setup</span>(<span class="ruby-keyword kw">self</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">validator</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:setup</span>)
65: 
66:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">validator</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:attributes</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">validator</span>.<span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">empty?</span>
67:             <span class="ruby-identifier">validator</span>.<span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attribute</span><span class="ruby-operator">|</span>
68:               <span class="ruby-identifier">_validators</span>[<span class="ruby-identifier">attribute</span>.<span class="ruby-identifier">to_sym</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">validator</span>
69:             <span class="ruby-keyword kw">end</span>
70:           <span class="ruby-keyword kw">else</span>
71:             <span class="ruby-identifier">_validators</span>[<span class="ruby-keyword kw">nil</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">validator</span>
72:           <span class="ruby-keyword kw">end</span>
73: 
74:           <span class="ruby-identifier">validate</span>(<span class="ruby-identifier">validator</span>, <span class="ruby-identifier">options</span>)
75:         <span class="ruby-keyword kw">end</span>
76:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000731" class="method-detail">
        <a name="M000731"></a>

        <div class="method-heading">

          <a href="#M000731" class="method-signature">

          <span class="method-name">validators</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
List all validators that being used to validate the model using <tt><a
href="ClassMethods.html#M000728">validates_with</a></tt> method.
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000731-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000731-source">
<pre>
     <span class="ruby-comment cmt"># File /Users/montana/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/validations.rb, line 127</span>
127:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">validators</span>
128:         <span class="ruby-identifier">_validators</span>.<span class="ruby-identifier">values</span>.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">uniq</span>
129:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000732" class="method-detail">
        <a name="M000732"></a>

        <div class="method-heading">

          <a href="#M000732" class="method-signature">

          <span class="method-name">validators_on</span><span class="method-args">(attribute)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
List all validators that being used to validate a specific attribute.
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000732-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000732-source">
<pre>
     <span class="ruby-comment cmt"># File /Users/montana/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/validations.rb, line 132</span>
132:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">validators_on</span>(<span class="ruby-identifier">attribute</span>)
133:         <span class="ruby-identifier">_validators</span>[<span class="ruby-identifier">attribute</span>.<span class="ruby-identifier">to_sym</span>]
134:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>



    </div>




  </div>

<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>
