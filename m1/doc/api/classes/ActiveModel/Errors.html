<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: ActiveModel::Errors [Rails Framework Documentation]</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;

    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }

  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }<\/style>" )

  // ]]>
  </script>

</head>
<body>


    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">ActiveModel::Errors</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>


                <a href="../../files/Users/montana/_bundle/ruby/1_9_1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/errors_rb.html">

                /Users/montana/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/errors.rb

                </a>


        <br />

            </td>
        </tr>


        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>

                ActiveSupport::OrderedHash

            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">

  <div id="contextContent">

    <div id="description">
      <p>
Provides a modified <tt>OrderedHash</tt> that you can include in your
object for handling error messages and interacting with Action Pack
helpers.
</p>
<p>
A minimal implementation could be:
</p>
<pre>
  class Person

    # Required dependency for ActiveModel::Errors
    extend ActiveModel::Naming

    def initialize
      @errors = ActiveModel::Errors.new(self)
    end

    attr_accessor :name
    attr_reader   :errors

    def validate!
      errors.add(:name, &quot;can not be nil&quot;) if name == nil
    end

    # The following methods are needed to be minimally implemented

    def read_attribute_for_validation(attr)
      send(attr)
    end

    def ErrorsPerson.human_attribute_name(attr, options = {})
      attr
    end

    def ErrorsPerson.lookup_ancestors
      [self]
    end

  end
</pre>
<p>
The last three methods are required in your object for <a
href="Errors.html">Errors</a> to be able to generate error messages
correctly and also handle multiple languages. Of course, if you extend your
object with ActiveModel::Translations you will not need to implement the
last two. Likewise, using <a
href="Validations.html">ActiveModel::Validations</a> will handle the
validation related methods for you.
</p>
<p>
The above allows you to do:
</p>
<pre>
  p = Person.new
  p.validate!             # =&gt; [&quot;can not be nil&quot;]
  p.errors.full_messages  # =&gt; [&quot;name can not be nil&quot;]
  # etc..
</pre>

    </div>

   </div>


    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">

        <a href="#M000753">[]</a>&nbsp;&nbsp;

        <a href="#M000755">[]=</a>&nbsp;&nbsp;

        <a href="#M000762">add</a>&nbsp;&nbsp;

        <a href="#M000764">add_on_blank</a>&nbsp;&nbsp;

        <a href="#M000763">add_on_empty</a>&nbsp;&nbsp;

        <a href="#M000759">count</a>&nbsp;&nbsp;

        <a href="#M000756">each</a>&nbsp;&nbsp;

        <a href="#M000760">empty?</a>&nbsp;&nbsp;

        <a href="#M000765">full_messages</a>&nbsp;&nbsp;

        <a href="#M000766">generate_message</a>&nbsp;&nbsp;

        <a href="#M000754">get</a>&nbsp;&nbsp;

        <a href="#M000752">new</a>&nbsp;&nbsp;

        <a href="#M000757">size</a>&nbsp;&nbsp;

        <a href="#M000758">to_a</a>&nbsp;&nbsp;

        <a href="#M000761">to_xml</a>&nbsp;&nbsp;

      </div>
    </div>

  </div>

    <!-- if includes -->

    <div id="includes">
      <h3 class="section-bar">Included Modules</h3>

      <div id="includes-list">

        <span class="include-name"><a href="DeprecatedErrorMethods.html">DeprecatedErrorMethods</a></span>

      </div>
    </div>

    <div id="section">

    <div id="aliases-list">
      <h3 class="section-bar">External Aliases</h3>

      <div class="name-list">
      <table summary="aliases">

        <tr class="top-aligned-row context-row">
          <td class="context-item-name">set</td>
          <td>-&gt;</td>
          <td class="context-item-value">:</td>
        </tr>

        </table>
      </div>
    </div>




    <!-- if method_list -->

    <div id="methods">

      <h3 class="section-bar">Public Class methods</h3>


      <div id="method-M000752" class="method-detail">
        <a name="M000752"></a>

        <div class="method-heading">

          <a href="#M000752" class="method-signature">

          <span class="method-name">new</span><span class="method-args">(base)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Pass in the instance of the object that is using the errors object.
</p>
<pre>
  class Person
    def initialize
      @errors = ActiveModel::Errors.new(self)
    end
  end
</pre>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000752-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000752-source">
<pre>
    <span class="ruby-comment cmt"># File /Users/montana/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/errors.rb, line 69</span>
69:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">base</span>)
70:       <span class="ruby-ivar">@base</span> = <span class="ruby-identifier">base</span>
71:       <span class="ruby-keyword kw">super</span>()
72:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <h3 class="section-bar">Public Instance methods</h3>


      <div id="method-M000753" class="method-detail">
        <a name="M000753"></a>

        <div class="method-heading">

          <a href="#M000753" class="method-signature">

          <span class="method-name">[]</span><span class="method-args">(attribute)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
When passed a symbol or a name of a method, returns an array of errors for
the method.
</p>
<pre>
  p.errors[:name]   #=&gt; [&quot;can not be nil&quot;]
  p.errors['name']  #=&gt; [&quot;can not be nil&quot;]
</pre>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000753-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000753-source">
<pre>
    <span class="ruby-comment cmt"># File /Users/montana/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/errors.rb, line 81</span>
81:     <span class="ruby-keyword kw">def</span> <span class="ruby-operator">[]</span>(<span class="ruby-identifier">attribute</span>)
82:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">errors</span> = <span class="ruby-identifier">get</span>(<span class="ruby-identifier">attribute</span>.<span class="ruby-identifier">to_sym</span>)
83:         <span class="ruby-identifier">errors</span>
84:       <span class="ruby-keyword kw">else</span>
85:         <span class="ruby-identifier">set</span>(<span class="ruby-identifier">attribute</span>.<span class="ruby-identifier">to_sym</span>, [])
86:       <span class="ruby-keyword kw">end</span>
87:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000755" class="method-detail">
        <a name="M000755"></a>

        <div class="method-heading">

          <a href="#M000755" class="method-signature">

          <span class="method-name">[]=</span><span class="method-args">(attribute, error)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Adds to the supplied attribute the supplied error message.
</p>
<pre>
  p.errors[:name] = &quot;must be set&quot;
  p.errors[:name] #=&gt; ['must be set']
</pre>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000755-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000755-source">
<pre>
    <span class="ruby-comment cmt"># File /Users/montana/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/errors.rb, line 93</span>
93:     <span class="ruby-keyword kw">def</span> <span class="ruby-operator">[]=</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">error</span>)
94:       <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">attribute</span>.<span class="ruby-identifier">to_sym</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">error</span>
95:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000762" class="method-detail">
        <a name="M000762"></a>

        <div class="method-heading">

          <a href="#M000762" class="method-signature">

          <span class="method-name">add</span><span class="method-args">(attribute, message = nil, options = {})</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Adds an error message (<tt>messsage</tt>) to the <tt>attribute</tt>, which
will be returned on a call to <tt>on(attribute)</tt> for the same attribute
and ensure that this error object returns false when asked if
<tt>empty?</tt>. More than one error can be added to the same
<tt>attribute</tt> in which case an array will be returned on a call to
<tt>on(attribute)</tt>. If no <tt>messsage</tt> is supplied, :invalid is
assumed.
</p>
<p>
If <tt>message</tt> is a Symbol, it will be translated, using the
appropriate scope (see translate_error). If <tt>message</tt> is a Proc, it
will be called, allowing for things like Time.now to be used within an
error
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000762-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000762-source">
<pre>
     <span class="ruby-comment cmt"># File /Users/montana/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/errors.rb, line 180</span>
180:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">message</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">options</span> = {})
181:       <span class="ruby-identifier">message</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">:invalid</span>
182:       <span class="ruby-identifier">message</span> = <span class="ruby-identifier">generate_message</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">message</span>, <span class="ruby-identifier">options</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">message</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Symbol</span>)
183:       <span class="ruby-identifier">message</span> = <span class="ruby-identifier">message</span>.<span class="ruby-identifier">call</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">message</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Proc</span>)
184:       <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">attribute</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">message</span>
185:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000764" class="method-detail">
        <a name="M000764"></a>

        <div class="method-heading">

          <a href="#M000764" class="method-signature">

          <span class="method-name">add_on_blank</span><span class="method-args">(attributes, custom_message = nil)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Will add an error message to each of the attributes in <tt>attributes</tt>
that is blank (using <a href="../Object.html#M000054">Object#blank?</a>).
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000764-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000764-source">
<pre>
     <span class="ruby-comment cmt"># File /Users/montana/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/errors.rb, line 197</span>
197:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_on_blank</span>(<span class="ruby-identifier">attributes</span>, <span class="ruby-identifier">custom_message</span> = <span class="ruby-keyword kw">nil</span>)
198:       [<span class="ruby-identifier">attributes</span>].<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attribute</span><span class="ruby-operator">|</span>
199:         <span class="ruby-identifier">value</span> = <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:read_attribute_for_validation</span>, <span class="ruby-identifier">attribute</span>)
200:         <span class="ruby-identifier">add</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">:blank</span>, <span class="ruby-identifier">:default</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">custom_message</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">blank?</span>
201:       <span class="ruby-keyword kw">end</span>
202:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000763" class="method-detail">
        <a name="M000763"></a>

        <div class="method-heading">

          <a href="#M000763" class="method-signature">

          <span class="method-name">add_on_empty</span><span class="method-args">(attributes, custom_message = nil)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Will add an error message to each of the attributes in <tt>attributes</tt>
that is empty.
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000763-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000763-source">
<pre>
     <span class="ruby-comment cmt"># File /Users/montana/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/errors.rb, line 188</span>
188:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_on_empty</span>(<span class="ruby-identifier">attributes</span>, <span class="ruby-identifier">custom_message</span> = <span class="ruby-keyword kw">nil</span>)
189:       [<span class="ruby-identifier">attributes</span>].<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attribute</span><span class="ruby-operator">|</span>
190:         <span class="ruby-identifier">value</span> = <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:read_attribute_for_validation</span>, <span class="ruby-identifier">attribute</span>)
191:         <span class="ruby-identifier">is_empty</span> = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:empty?</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">false</span>
192:         <span class="ruby-identifier">add</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">:empty</span>, <span class="ruby-identifier">:default</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">custom_message</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-operator">!</span><span class="ruby-identifier">value</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">is_empty</span>
193:       <span class="ruby-keyword kw">end</span>
194:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000759" class="method-detail">
        <a name="M000759"></a>

        <div class="method-heading">

          <a href="#M000759" class="method-signature">

          <span class="method-name">count</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Returns the number of error messages.
</p>
<pre>
  p.errors.add(:name, &quot;can't be blank&quot;)
  p.errors.count #=&gt; 1
  p.errors.add(:name, &quot;must be specified&quot;)
  p.errors.count #=&gt; 2
</pre>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000759-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000759-source">
<pre>
     <span class="ruby-comment cmt"># File /Users/montana/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/errors.rb, line 141</span>
141:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">count</span>
142:       <span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
143:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000756" class="method-detail">
        <a name="M000756"></a>

        <div class="method-heading">

          <a href="#M000756" class="method-signature">

          <span class="method-name">each</span><span class="method-args">() {|attribute, error| ...}</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Iterates through each error key, value pair in the error messages hash.
Yields the attribute and the error for that attribute. If the attribute has
more than one error message, yields once for each error message.
</p>
<pre>
  p.errors.add(:name, &quot;can't be blank&quot;)
  p.errors.each do |attribute, errors_array|
    # Will yield :name and &quot;can't be blank&quot;
  end

  p.errors.add(:name, &quot;must be specified&quot;)
  p.errors.each do |attribute, errors_array|
    # Will yield :name and &quot;can't be blank&quot;
    # then yield :name and &quot;must be specified&quot;
  end
</pre>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000756-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000756-source">
<pre>
     <span class="ruby-comment cmt"># File /Users/montana/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/errors.rb, line 111</span>
111:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">each</span>
112:       <span class="ruby-identifier">each_key</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attribute</span><span class="ruby-operator">|</span>
113:         <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">attribute</span>].<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">error</span><span class="ruby-operator">|</span> <span class="ruby-keyword kw">yield</span> <span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">error</span> }
114:       <span class="ruby-keyword kw">end</span>
115:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000760" class="method-detail">
        <a name="M000760"></a>

        <div class="method-heading">

          <a href="#M000760" class="method-signature">

          <span class="method-name">empty?</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Returns true if there are any errors, false if not.
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000760-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000760-source">
<pre>
     <span class="ruby-comment cmt"># File /Users/montana/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/errors.rb, line 146</span>
146:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">empty?</span>
147:       <span class="ruby-identifier">all?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">v</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">empty?</span> }
148:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000765" class="method-detail">
        <a name="M000765"></a>

        <div class="method-heading">

          <a href="#M000765" class="method-signature">

          <span class="method-name">full_messages</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Returns all the full error messages in an array.
</p>
<pre>
  class Company
    validates_presence_of :name, :address, :email
    validates_length_of :name, :in =&gt; 5..30
  end

  company = Company.create(:address =&gt; '123 First St.')
  company.errors.full_messages # =&gt;
    [&quot;Name is too short (minimum is 5 characters)&quot;, &quot;Name can't be blank&quot;, &quot;Address can't be blank&quot;]
</pre>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000765-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000765-source">
<pre>
     <span class="ruby-comment cmt"># File /Users/montana/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/errors.rb, line 214</span>
214:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">full_messages</span>
215:       <span class="ruby-identifier">full_messages</span> = []
216: 
217:       <span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">messages</span><span class="ruby-operator">|</span>
218:         <span class="ruby-identifier">messages</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">wrap</span>(<span class="ruby-identifier">messages</span>)
219:         <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">messages</span>.<span class="ruby-identifier">empty?</span>
220: 
221:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">attribute</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:base</span>
222:           <span class="ruby-identifier">messages</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span> <span class="ruby-identifier">full_messages</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">m</span> }
223:         <span class="ruby-keyword kw">else</span>
224:           <span class="ruby-identifier">attr_name</span> = <span class="ruby-identifier">attribute</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-value str">'.'</span>, <span class="ruby-value str">'_'</span>).<span class="ruby-identifier">humanize</span>
225:           <span class="ruby-identifier">attr_name</span> = <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">human_attribute_name</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">:default</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">attr_name</span>)
226:           <span class="ruby-identifier">options</span> = { <span class="ruby-identifier">:default</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;{{attribute}} {{message}}&quot;</span>, <span class="ruby-identifier">:attribute</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">attr_name</span> }
227: 
228:           <span class="ruby-identifier">messages</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span>
229:             <span class="ruby-identifier">full_messages</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-identifier">:&quot;errors.format&quot;</span>, <span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:message</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">m</span>))
230:           <span class="ruby-keyword kw">end</span>
231:         <span class="ruby-keyword kw">end</span>
232:       <span class="ruby-keyword kw">end</span>
233: 
234:       <span class="ruby-identifier">full_messages</span>
235:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000766" class="method-detail">
        <a name="M000766"></a>

        <div class="method-heading">

          <a href="#M000766" class="method-signature">

          <span class="method-name">generate_message</span><span class="method-args">(attribute, message = :invalid, options = {})</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Translates an error message in its default scope
(<tt>activemodel.errors.messages</tt>). Error messages are first looked up
in <tt>models.MODEL.attributes.ATTRIBUTE.MESSAGE</tt>, if it&#8217;s not
there, it&#8217;s looked up in <tt>models.MODEL.MESSAGE</tt> and if that is
not there it returns the translation of the default message (e.g.
<tt>activemodel.errors.messages.MESSAGE</tt>). The translated model name,
translated attribute name and the value are available for interpolation.
</p>
<p>
When using inheritence in your models, it will check all the inherited
models too, but only if the model itself hasn&#8217;t been found. Say you
have <tt>class Admin &lt; User; end</tt> and you wanted the translation for
the <tt>:blank</tt> error <tt>message</tt> for the <tt>title</tt>
<tt>attribute</tt>, it looks for these translations:
</p>
<p>
<ol>
<li><tt>activemodel.errors.models.admin.attributes.title.blank</tt></li>
<li><tt>activemodel.errors.models.admin.blank</tt></li>
<li><tt>activemodel.errors.models.user.attributes.title.blank</tt></li>
<li><tt>activemodel.errors.models.user.blank</tt></li> <li>any default you
provided through the <tt>options</tt> hash (in the activemodel.errors
scope)</li> <li><tt>activemodel.errors.messages.blank</tt></li>
<li><tt>errors.attributes.title.blank</tt></li>
<li><tt>errors.messages.blank</tt></li> </ol>
</p>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000766-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000766-source">
<pre>
     <span class="ruby-comment cmt"># File /Users/montana/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/errors.rb, line 257</span>
257:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">generate_message</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">message</span> = <span class="ruby-identifier">:invalid</span>, <span class="ruby-identifier">options</span> = {})
258:       <span class="ruby-identifier">message</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:default</span>] = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:default</span>], <span class="ruby-identifier">message</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:default</span>].<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Symbol</span>)
259: 
260:       <span class="ruby-identifier">defaults</span> = <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">lookup_ancestors</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">klass</span><span class="ruby-operator">|</span>
261:         [ <span class="ruby-node">&quot;#{@base.class.i18n_scope}.errors.models.#{klass.model_name.underscore}.attributes.#{attribute}.#{message}&quot;</span><span class="ruby-node">&quot;#{@base.class.i18n_scope}.errors.models.#{klass.model_name.underscore}.attributes.#{attribute}.#{message}&quot;</span>,
262:           <span class="ruby-node">&quot;#{@base.class.i18n_scope}.errors.models.#{klass.model_name.underscore}.#{message}&quot;</span><span class="ruby-node">&quot;#{@base.class.i18n_scope}.errors.models.#{klass.model_name.underscore}.#{message}&quot;</span> ]
263:       <span class="ruby-keyword kw">end</span>
264: 
265:       <span class="ruby-identifier">defaults</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:default</span>)
266:       <span class="ruby-identifier">defaults</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{@base.class.i18n_scope}.errors.messages.#{message}&quot;</span><span class="ruby-node">&quot;#{@base.class.i18n_scope}.errors.messages.#{message}&quot;</span>
267:       <span class="ruby-identifier">defaults</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;errors.attributes.#{attribute}.#{message}&quot;</span><span class="ruby-node">&quot;errors.attributes.#{attribute}.#{message}&quot;</span>
268:       <span class="ruby-identifier">defaults</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;errors.messages.#{message}&quot;</span><span class="ruby-node">&quot;errors.messages.#{message}&quot;</span>
269: 
270:       <span class="ruby-identifier">defaults</span>.<span class="ruby-identifier">compact!</span>
271:       <span class="ruby-identifier">defaults</span>.<span class="ruby-identifier">flatten!</span>
272: 
273:       <span class="ruby-identifier">key</span> = <span class="ruby-identifier">defaults</span>.<span class="ruby-identifier">shift</span>
274:       <span class="ruby-identifier">value</span> = <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:read_attribute_for_validation</span>, <span class="ruby-identifier">attribute</span>)
275: 
276:       <span class="ruby-identifier">options</span> = {
277:         <span class="ruby-identifier">:default</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">defaults</span>,
278:         <span class="ruby-identifier">:model</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">model_name</span>.<span class="ruby-identifier">human</span>,
279:         <span class="ruby-identifier">:attribute</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">human_attribute_name</span>(<span class="ruby-identifier">attribute</span>),
280:         <span class="ruby-identifier">:value</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">value</span>
281:       }.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">options</span>)
282: 
283:       <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">translate</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">options</span>)
284:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000754" class="method-detail">
        <a name="M000754"></a>

        <div class="method-heading">

          <span class="method-name">get</span><span class="method-args">(attribute)</span>

        </div>

        <div class="method-description">

          <p>
Alias for #[]
</p>

        </div>
      </div>


      <div id="method-M000757" class="method-detail">
        <a name="M000757"></a>

        <div class="method-heading">

          <a href="#M000757" class="method-signature">

          <span class="method-name">size</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Returns the number of error messages.
</p>
<pre>
  p.errors.add(:name, &quot;can't be blank&quot;)
  p.errors.size #=&gt; 1
  p.errors.add(:name, &quot;must be specified&quot;)
  p.errors.size #=&gt; 2
</pre>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000757-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000757-source">
<pre>
     <span class="ruby-comment cmt"># File /Users/montana/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/errors.rb, line 123</span>
123:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">size</span>
124:       <span class="ruby-identifier">values</span>.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">size</span>
125:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000758" class="method-detail">
        <a name="M000758"></a>

        <div class="method-heading">

          <a href="#M000758" class="method-signature">

          <span class="method-name">to_a</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Returns an array of error messages, with the attribute name included
</p>
<pre>
  p.errors.add(:name, &quot;can't be blank&quot;)
  p.errors.add(:name, &quot;must be specified&quot;)
  p.errors.to_a   #=&gt;   [&quot;name can't be blank&quot;, &quot;name must be specified&quot;]
</pre>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000758-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000758-source">
<pre>
     <span class="ruby-comment cmt"># File /Users/montana/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/errors.rb, line 132</span>
132:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_a</span>
133:       <span class="ruby-identifier">full_messages</span>
134:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>


      <div id="method-M000761" class="method-detail">
        <a name="M000761"></a>

        <div class="method-heading">

          <a href="#M000761" class="method-signature">

          <span class="method-name">to_xml</span><span class="method-args">(options={})</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Returns an xml formatted representation of the <a
href="Errors.html">Errors</a> hash.
</p>
<pre>
  p.errors.add(:name, &quot;can't be blank&quot;)
  p.errors.add(:name, &quot;must be specified&quot;)
  p.errors.to_xml   #=&gt; Produces:

  #  &lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot;?&gt;
  #  &lt;errors&gt;
  #    &lt;error&gt;name can't be blank&lt;/error&gt;
  #    &lt;error&gt;name must be specified&lt;/error&gt;
  #  &lt;/errors&gt;
</pre>

          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000761-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000761-source">
<pre>
     <span class="ruby-comment cmt"># File /Users/montana/.bundle/ruby/1.9.1/bundler/gems/rails-16a5e918a06649ffac24fd5873b875daf66212ad-8c7e8976e97d96f514e22b04fc1afb9453134076/activemodel/lib/active_model/errors.rb, line 161</span>
161:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">options</span>={})
162:       <span class="ruby-identifier">require</span> <span class="ruby-value str">'builder'</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">defined?</span> <span class="ruby-operator">::</span><span class="ruby-constant">Builder</span>
163:       <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:root</span>]    <span class="ruby-operator">||=</span> <span class="ruby-value str">&quot;errors&quot;</span>
164:       <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:indent</span>]  <span class="ruby-operator">||=</span> <span class="ruby-value">2</span>
165:       <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:builder</span>] <span class="ruby-operator">||=</span> <span class="ruby-operator">::</span><span class="ruby-constant">Builder</span><span class="ruby-operator">::</span><span class="ruby-constant">XmlMarkup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:indent</span>])
166: 
167:       <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:builder</span>].<span class="ruby-identifier">instruct!</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:skip_instruct</span>)
168:       <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:builder</span>].<span class="ruby-identifier">errors</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span>
169:         <span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">error</span><span class="ruby-operator">|</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">error</span>(<span class="ruby-identifier">error</span>) }
170:       <span class="ruby-keyword kw">end</span>
171:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>

        </div>
      </div>



    </div>




  </div>

<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>
